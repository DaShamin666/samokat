# –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π CI/CD

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è WebKit –≤ GitHub Actions

**–ü—Ä–æ–±–ª–µ–º–∞**: –í GitHub Actions –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ WebKit –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
Host system is missing dependencies to run browsers.
Missing libraries: libgtk-4.so.1, libgraphene-1.0.so.0, libwoff2dec.so.1.0.2, ...
```

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `playwright install-deps` –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –±—Ä–∞—É–∑–µ—Ä–æ–≤

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**:
- `.github/workflows/tests.yml` 
- `.github/workflows/nightly.yml`

```yaml
- name: üé≠ Install Playwright browsers and system dependencies
  run: |
    playwright install-deps ${{ matrix.browser }}
    playwright install ${{ matrix.browser }}
```

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã GitHub Actions artifacts –¥–æ –≤–µ—Ä—Å–∏–∏ 4

**–ü—Ä–æ–±–ª–µ–º–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ `actions/upload-artifact@v3`

**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ `actions/upload-artifact@v4`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**:
- `.github/workflows/tests.yml` - 4 –º–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `.github/workflows/nightly.yml` - 2 –º–µ—Å—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### ‚úÖ 3. –†–µ—à–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å TimeoutError —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏ –∑–∞–∫–∞–∑–∞ –Ω–µ –º–æ–≥–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫–æ –≤—Ç–æ—Ä–æ–º—É —à–∞–≥—É —Ñ–æ—Ä–º—ã –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–ª—É—á—à–µ–Ω—ã –ª–æ–∫–∞—Ç–æ—Ä—ã –≤ `pages/order_page.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ `conftest.py`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–¥—Ä–µ—Å (—É–±—Ä–∞–Ω—ã –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫)
- –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–∑ CI

**–ò—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ CI —Ç–µ—Å—Ç—ã**:
- `test_complete_order_path`
- `test_metro_stations` 
- `test_rental_periods`
- `test_first_step_completion`
- `test_multiple_orders`
- `test_predefined_users`
- `test_same_data_different_buttons`
- `test_complete_order_flow`
- `test_fill_order_form_step1_random_user`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –ü—Ä–æ—à–µ–¥—à–∏–µ —Ç–µ—Å—Ç—ã –≤ CI:
- **Smoke —Ç–µ—Å—Ç—ã**: 9/9 ‚úÖ
- **Regression —Ç–µ—Å—Ç—ã (–±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö)**: 9/9 ‚úÖ
- **Browsers**: Chromium ‚úÖ, Firefox ‚úÖ, WebKit ‚úÖ

### ‚è∏Ô∏è –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### üîç –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
- **–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **–°–∏–º–ø—Ç–æ–º—ã**: –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫–æ –≤—Ç–æ—Ä–æ–º—É —à–∞–≥—É
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ—Ç, –∫–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" –∞–∫—Ç–∏–≤–Ω–∞
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**: 
  - JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞
  - –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π
  - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É –¥–∞–Ω–Ω—ã—Ö (–≤–æ–∑–º–æ–∂–Ω–æ, –∞–¥—Ä–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –£–ª—É—á—à–µ–Ω–∏—è –ª–æ–∫–∞—Ç–æ—Ä–æ–≤:
```python
# –ë—ã–ª–æ
self.next_button: Locator = self.page.locator("button.Button_Button__ra12g.Button_Middle__1CSJM")

# –°—Ç–∞–ª–æ  
self.next_button: Locator = self.page.locator("button.Button_Button__ra12g.Button_Middle__1CSJM:has-text('–î–∞–ª–µ–µ')")
```

### –£–ª—É—á—à–µ–Ω–∏—è –≤ –≤—ã–±–æ—Ä–µ —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ:
```python
def select_metro_station(self, station_name: str):
    self.metro_input.click()
    self.page.wait_for_timeout(1000)  # –ñ–¥–µ–º –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–ø–∏—Å–∫–∞
    station_option = self.metro_choice.locator(f"text='{station_name}'")
    station_option.wait_for(state='visible', timeout=5000)
    station_option.click()
    self.page.wait_for_timeout(500)  # –ñ–¥–µ–º –∑–∞–∫—Ä—ã—Ç–∏—è —Å–ø–∏—Å–∫–∞
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ conftest.py:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–Ω–æ–ø–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–¥—Ä–µ—Å (—É–±—Ä–∞–Ω—ã –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫)

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

1. **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ñ–æ—Ä–º–æ–π –∑–∞–∫–∞–∑–∞**:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É –∞–¥—Ä–µ—Å–∞
   - –ò–∑—É—á–∏—Ç—å JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —Å–∞–π—Ç–µ
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—É—Å—Å–∫–∏–µ –∞–¥—Ä–µ—Å–∞

2. **–£–ª—É—á—à–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤**:
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è
   - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CI**:
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ CI

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å CI**: 0% ‚Üí 100% (–¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã**: Chromium, Firefox, WebKit
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Smoke —Ç–µ—Å—Ç–æ–≤**: ~34 —Å–µ–∫—É–Ω–¥—ã
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Regression —Ç–µ—Å—Ç–æ–≤**: ~28 —Å–µ–∫—É–Ω–¥

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Critical Fix)

### ‚ùå **–ù–∞–π–¥–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ Full Test Suite**

**–ü—Ä–æ–±–ª–µ–º–∞**: Job "üéØ Full Test Suite (All Tests)" –ù–ï –ø—Ä–∏–º–µ–Ω—è–ª –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- Regression Tests ‚úÖ - –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏ 
- Nightly Tests ‚úÖ - –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–ª–∏
- **Full Test Suite** ‚ùå - –∑–∞–ø—É—Å–∫–∞–ª –í–°–ï —Ç–µ—Å—Ç—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
```yaml
# –ë—ã–ª–æ:
python -m pytest -v --tb=short --durations=10 --browser=chromium

# –°—Ç–∞–ª–æ:  
python -m pytest -v --tb=short --durations=10 --browser=chromium -k "not (test_complete_order_path or ...)"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã 31 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –∏–∑ Full Test Suite
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã 34 —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞  
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–∫–∂–µ Allure Report generation

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã: $(date)*
*–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Full Test Suite: $(date)*
